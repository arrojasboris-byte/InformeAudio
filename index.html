<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Control Center Audio - Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- ============================
       ESTILOS
  =============================== -->
  <style>
    :root {
      /* Tema oscuro por defecto */
      --bg: #050816;
      --bg-sidebar: #020617;
      --bg-main: radial-gradient(circle at top left, #1f2937, #020617 55%);
      --bg-card: radial-gradient(circle at top left, #111827, #020617 55%);
      --bg-soft: #0f172a;
      --accent: #22c55e;
      --accent-soft: #bbf7d0;
      --accent-warn: #f97316;
      --accent-danger: #ef4444;
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --border-soft: #1f2937;
      --radius-lg: 14px;
      --radius-xl: 18px;
      --shadow-soft: 0 14px 30px rgba(0, 0, 0, 0.45);
    }

    /* Tema claro */
    body.light {
      --bg: #f3f4f6;
      --bg-sidebar: #ffffff;
      --bg-main: radial-gradient(circle at top left, #e5e7eb, #f9fafb 55%);
      --bg-card: radial-gradient(circle at top left, #ffffff, #e5e7eb 55%);
      --bg-soft: #e5e7eb;
      --accent: #16a34a;
      --accent-soft: #bbf7d0;
      --accent-warn: #ea580c;
      --accent-danger: #dc2626;
      --text-main: #020617;
      --text-muted: #6b7280;
      --border-soft: #d1d5db;
      --shadow-soft: 0 10px 24px rgba(15, 23, 42, 0.18);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden; /* üîí SIN SCROLL */
    }

    body {
      background: var(--bg-main);
      color: var(--text-main);
      display: flex;
    }

    /* LAYOUT PRINCIPAL */
    .sidebar {
      width: 250px;
      background: var(--bg-sidebar);
      border-right: 1px solid var(--border-soft);
      padding: 18px 18px 24px;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-badge {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #fde68a, var(--accent));
      box-shadow: 0 0 15px rgba(34, 197, 94, 0.5);
    }

    .logo-text {
      display: flex;
      flex-direction: column;
    }

    .logo-title {
      font-weight: 700;
      font-size: 1.05rem;
    }

    .logo-subtitle {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    .section-title {
      font-size: 0.75rem;
      text-transform: uppercase;
      color: var(--text-muted);
      letter-spacing: 0.12em;
      margin-bottom: 8px;
    }

    .nav-list {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 0.88rem;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.18s ease;
    }

    .nav-item span.icon {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: #0f172a;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
    }

    .nav-item.active {
      background: linear-gradient(90deg, var(--accent), #4ade80);
      color: #022c22;
      font-weight: 600;
    }

    body.light .nav-item.active {
      color: #052e16;
    }

    .nav-item.active span.icon {
      background: rgba(15, 23, 42, 0.15);
    }

    .nav-item:hover:not(.active) {
      background: rgba(15, 23, 42, 0.08);
      color: var(--text-main);
    }

    .sidebar-footer {
      margin-top: auto;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .delegate-filters {
      background: rgba(15, 23, 42, 0.9);
      border-radius: var(--radius-lg);
      padding: 12px;
      margin-top: 4px;
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    body.light .delegate-filters {
      background: #e5e7eb;
      border-color: #cbd5f5;
    }

    .delegate-filters-title {
      font-size: 0.8rem;
      margin-bottom: 6px;
    }

    .delegate-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .delegate-pill {
      font-size: 0.7rem;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      cursor: pointer;
      opacity: 0.7;
    }

    .delegate-pill.active {
      border-color: var(--accent);
      background: rgba(34, 197, 94, 0.12);
      opacity: 1;
    }

    .main {
      flex: 1;
      padding: 12px 18px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-height: 100vh;
      overflow: hidden; /* contenemos todo dentro */
    }

    .topbar {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 4px;
    }

    .search-input-wrapper {
      flex: 1;
      position: relative;
    }

    .search-input {
      width: 100%;
      background: rgba(15, 23, 42, 0.95);
      border-radius: 999px;
      padding: 8px 12px 8px 30px;
      border: 1px solid var(--border-soft);
      color: var(--text-main);
      font-size: 0.86rem;
      outline: none;
    }

    body.light .search-input {
      background: #ffffff;
    }

    .search-input::placeholder {
      color: var(--text-muted);
    }

    .search-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .btn {
      border-radius: 999px;
      padding: 7px 12px;
      border: 1px solid transparent;
      font-size: 0.78rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #0f172a;
      color: var(--text-main);
    }

    body.light .btn {
      background: #e5e7eb;
      color: #020617;
    }

    .btn-cta {
      background: linear-gradient(90deg, var(--accent), #4ade80);
      color: #022c22;
      font-weight: 600;
      box-shadow: 0 10px 25px rgba(34, 197, 94, 0.35);
    }

    body.light .btn-cta {
      color: #052e16;
    }

    .btn-outline {
      border-color: var(--border-soft);
    }

    .btn span.icon {
      font-size: 0.85rem;
    }

    .filters-row {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      font-size: 0.8rem;
      margin-bottom: 2px;
    }

    .select {
      background: rgba(15, 23, 42, 0.95);
      border-radius: 999px;
      padding: 5px 10px;
      border: 1px solid var(--border-soft);
      color: var(--text-main);
      outline: none;
      font-size: 0.8rem;
    }

    body.light .select {
      background: #ffffff;
      color: #020617;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 4px;
    }

    .section-header h2 {
      font-size: 1.02rem;
      font-weight: 600;
    }

    .section-header span.sub {
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(6, minmax(0, 1fr));
      gap: 8px;
      margin-bottom: 4px;
    }

    .card {
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      padding: 10px 10px 8px;
      border: 1px solid rgba(15, 23, 42, 0.9);
      box-shadow: var(--shadow-soft);
    }

    body.light .card {
      border-color: var(--border-soft);
    }

    .card-header {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-bottom: 3px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .kpi-main {
      font-size: 1.2rem;
      font-weight: 700;
      display: flex;
      align-items: baseline;
      gap: 4px;
    }

    .kpi-tag {
      font-size: 0.7rem;
      border-radius: 999px;
      padding: 2px 6px;
      background: rgba(34, 197, 94, 0.12);
      color: #4ade80;
    }

    .kpi-tag.warn {
      background: rgba(234, 179, 8, 0.12);
      color: #facc15;
    }

    .kpi-secondary {
      font-size: 0.72rem;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .grid-main {
      display: grid;
      grid-template-columns: 1.7fr 1.1fr 1.2fr;
      gap: 10px;
      align-items: stretch;
      margin-bottom: 6px;
    }

    .card h3 {
      font-size: 0.9rem;
      margin-bottom: 4px;
    }

    .card-sub {
      font-size: 0.72rem;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .chart-container {
      position: relative;
      height: 180px; /* compactado para encajar sin scroll */
      width: 100%;
    }

    /* RANKING */
    .ranking-grid {
      margin-top: 6px;
    }

    .ranking-header,
    .ranking-row {
      display: grid;
      grid-template-columns: 2fr 1.2fr 0.8fr 0.8fr 0.9fr;
      font-size: 0.72rem;
      column-gap: 6px;
      align-items: center;
      padding: 3px 0;
    }

    .ranking-header {
      color: var(--text-muted);
      border-bottom: 1px solid var(--border-soft);
      margin-bottom: 2px;
    }

    .ranking-row {
      border-radius: 9px;
      padding-inline: 4px;
    }

    .ranking-row:nth-child(even) {
      background: rgba(15, 23, 42, 0.4);
    }

    body.light .ranking-row:nth-child(even) {
      background: rgba(148, 163, 184, 0.2);
    }

    .chip {
      border-radius: 999px;
      padding: 2px 6px;
      font-size: 0.7rem;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .chip.success {
      background: rgba(34, 197, 94, 0.12);
      border-color: rgba(34, 197, 94, 0.6);
      color: #4ade80;
    }

    .chip.warn {
      background: rgba(234, 179, 8, 0.12);
      border-color: rgba(234, 179, 8, 0.6);
      color: #facc15;
    }

    /* FALD√ìN DELEGADOS (tarjetas) */
    .delegados-section {
      margin-top: 4px;
    }

    .delegados-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .delegados-header h3 {
      font-size: 0.9rem;
    }

    .delegados-header span {
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    .delegados-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 8px;
      max-height: 180px;
    }

    .delegado-card {
      background: var(--bg-card);
      border-radius: 12px;
      border: 1px solid #2a2d36;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      font-size: 0.76rem;
      overflow: hidden;
    }

    body.light .delegado-card {
      border-color: var(--border-soft);
    }

    .delegado-header {
      height: 4px;
      width: 100%;
    }

    .delegado-body {
      padding: 8px 8px 6px;
    }

    .delegado-name {
      font-weight: 600;
      margin-bottom: 2px;
    }

    .delegado-meta {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    .centros-list {
      display: none;
      padding: 4px 8px 6px;
      border-top: 1px solid rgba(148, 163, 184, 0.35);
      max-height: 120px;
      overflow-y: auto;
    }

    .centro-item {
      margin-bottom: 3px;
    }

    .toggle-text {
      font-size: 0.7rem;
      color: var(--text-muted);
      margin-top: 2px;
    }

    /* SECCIONES "M√ìDULOS" (para cambio en men√∫) */
    .section {
      display: none;
      flex: 1;
      min-height: 0;
      overflow: hidden;
      flex-direction: column;
      gap: 6px;
    }

    .section.active {
      display: flex;
    }

    .section-placeholder {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      color: var(--text-muted);
      border-radius: 16px;
      border: 1px dashed var(--border-soft);
      background: rgba(15,23,42,0.4);
    }

    body.light .section-placeholder {
      background: rgba(229,231,235,0.8);
    }

    @media (max-width: 1400px) {
      /* Solo por seguridad si se abre en pantallas peque√±as */
      .delegados-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
      .kpi-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
      .grid-main {
        grid-template-columns: 1fr;
      }
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="dark">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="logo">
      <div class="logo-badge"></div>
      <div class="logo-text">
        <span class="logo-title">Control Center Audio</span>
        <span class="logo-subtitle">Dashboard de centros, visitas y KPIs</span>
      </div>
    </div>

    <div>
      <div class="section-title">Secciones</div>
      <nav class="nav-list" id="navList">
        <div class="nav-item active" data-section="dashboard">
          <span class="icon">üè†</span> Dashboard
        </div>
        <div class="nav-item" data-section="centros">
          <span class="icon">üè¢</span> Centros
        </div>
        <div class="nav-item" data-section="visitas">
          <span class="icon">üë£</span> Visitas
        </div>
        <div class="nav-item" data-section="servicios">
          <span class="icon">üõ†</span> Servicios
        </div>
        <div class="nav-item" data-section="ventas">
          <span class="icon">üí≥</span> Ventas
        </div>
        <div class="nav-item" data-section="proyectos">
          <span class="icon">üìä</span> Proyectos
        </div>
      </nav>
    </div>

    <div class="sidebar-footer">
      <div class="delegate-filters">
        <div class="delegate-filters-title">Filtros r√°pidos ¬∑ Delegados</div>
        <div class="delegate-pills">
          <div class="delegate-pill active">Blanca</div>
          <div class="delegate-pill">Cecilia</div>
          <div class="delegate-pill">Daniel</div>
          <div class="delegate-pill">Eneritz</div>
        </div>
      </div>
      <p style="margin-top:10px;">Versi√≥n demo ¬∑ Datos ficticios</p>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <!-- TOPBAR -->
    <div class="topbar">
      <div class="search-input-wrapper">
        <span class="search-icon">üîç</span>
        <input class="search-input" placeholder="Busca centros, visitas, servicios..." />
      </div>
      <button class="btn btn-outline" id="themeToggle">
        <span class="icon">üåì</span> Oscuro / Claro
      </button>
      <button class="btn btn-outline">
        <span class="icon">üíæ</span> Guardar vista
      </button>
      <button class="btn btn-outline">
        <span class="icon">‚¨áÔ∏è</span> Exportar HTML
      </button>
      <button class="btn btn-cta">
        <span class="icon">‚òÅÔ∏è</span> Actualizar datos nube
      </button>
    </div>

    <!-- FILTROS -->
    <div class="filters-row">
      <select class="select">
        <option>Periodo: √öltimos 12 meses</option>
        <option>√öltimos 3 meses</option>
        <option>√öltimo mes</option>
      </select>
      <select class="select">
        <option>Tipo centro: Todos</option>
        <option>Centro propio</option>
        <option>Franquicia</option>
      </select>
    </div>

    <!-- SECCIONES (M√ìDULOS) -->
    <div id="section-dashboard" class="section active">
      <!-- Resumen general -->
      <div>
        <div class="section-header">
          <h2>Resumen general KPIs</h2>
          <span class="sub">Visi√≥n r√°pida de aplicaciones, visitas, servicios, ventas, AAR y ayudas</span>
        </div>
      </div>

      <!-- KPIs (4 originales + 2 nuevos AAR y Ayudas) -->
      <section class="kpi-grid">
        <article class="card">
          <div class="card-header">
            <span>Aplicaciones HIT (global)</span>
          </div>
          <div class="kpi-main">
            <span>82%</span>
            <span class="kpi-tag">Objetivo 90%</span>
          </div>
          <div class="kpi-secondary">
            +4 pts vs periodo anterior
          </div>
        </article>

        <article class="card">
          <div class="card-header">
            <span>Visitas realizadas / planificadas</span>
          </div>
          <div class="kpi-main">
            <span>316</span>
            <span style="font-size:.9rem; color:var(--text-muted)">/ 384</span>
          </div>
          <div class="kpi-secondary">
            82% ejecuci√≥n ¬∑ 12 centros por debajo del 70%
          </div>
        </article>

        <article class="card">
          <div class="card-header">
            <span>Servicios realizados</span>
          </div>
          <div class="kpi-main">
            <span>497</span>
            <span class="kpi-tag">+18% crecimiento</span>
          </div>
          <div class="kpi-secondary">
            Revisiones 52% ¬∑ Ajustes 31% ¬∑ Otros 17%
          </div>
        </article>

        <article class="card">
          <div class="card-header">
            <span>Conversi√≥n a venta</span>
          </div>
          <div class="kpi-main">
            <span>27%</span>
            <span class="kpi-tag warn">Potencial seguimiento</span>
          </div>
          <div class="kpi-secondary">
            Ticket medio: 1.430 ‚Ç¨ ¬∑ Devoluciones 3,2%
          </div>
        </article>

        <!-- NUEVOS KPIs -->
        <article class="card">
          <div class="card-header">
            <span>AAR (Adaptaciones a Aud√≠fono en Revisi√≥n)</span>
          </div>
          <div class="kpi-main">
            <span>64%</span>
          </div>
          <div class="kpi-secondary">
            % de pacientes en AAR sobre el total de servicios.
          </div>
        </article>

        <article class="card">
          <div class="card-header">
            <span>Ayudas tramitadas</span>
          </div>
          <div class="kpi-main">
            <span>41%</span>
          </div>
          <div class="kpi-secondary">
            % de operaciones con ayuda / subvenci√≥n asociada.
          </div>
        </article>
      </section>

      <!-- GR√ÅFICAS: L√≠nea + Donuts + Radar -->
      <section class="grid-main">
        <!-- Evoluci√≥n mensual (gr√°fica original, compactada) -->
        <article class="card">
          <h3>Evoluci√≥n mensual</h3>
          <p class="card-sub">
            Visitas, aplicaciones en prueba y conversi√≥n a venta
          </p>
          <div class="chart-container">
            <canvas id="chartEvolucion"></canvas>
          </div>
        </article>

        <!-- Donut estado visitas -->
        <article class="card">
          <h3>Estado de visitas</h3>
          <p class="card-sub">
            Distribuci√≥n de visitas realizadas, pendientes y anuladas
          </p>
          <div class="chart-container">
            <canvas id="chartVisitas"></canvas>
          </div>
        </article>

        <!-- Radar delegados -->
        <article class="card">
          <h3>Radar delegados</h3>
          <p class="card-sub">
            Comparativa relativa por visitas, servicios y ventas (demo)
          </p>
          <div class="chart-container">
            <canvas id="chartRadar"></canvas>
          </div>
        </article>
      </section>

      <!-- Ranking -->
      <section class="card">
        <h3>Ranking r√°pido de centros</h3>
        <p class="card-sub">
          Mejores conversiones a venta y aplicaci√≥n de procesos
        </p>
        <div class="ranking-grid">
          <div class="ranking-header">
            <span>Centro</span>
            <span>Delegado</span>
            <span>Conv. prueba</span>
            <span>Conv. venta</span>
            <span>% Procesos</span>
          </div>

          <div class="ranking-row">
            <span>Madrid ¬∑ Reina Mercedes</span>
            <span>Cecilia</span>
            <span>64%</span>
            <span><span class="chip success">34%</span></span>
            <span>91%</span>
          </div>
          <div class="ranking-row">
            <span>Madrid ¬∑ Tetu√°n</span>
            <span>Blanca</span>
            <span>58%</span>
            <span><span class="chip">29%</span></span>
            <span>87%</span>
          </div>
          <div class="ranking-row">
            <span>Sevilla ¬∑ Nervi√≥n</span>
            <span>Daniel</span>
            <span>51%</span>
            <span><span class="chip warn">22%</span></span>
            <span>72%</span>
          </div>
          <div class="ranking-row">
            <span>Bilbao ¬∑ Gran V√≠a</span>
            <span>Eneritz</span>
            <span>47%</span>
            <span><span class="chip">25%</span></span>
            <span>69%</span>
          </div>
        </div>
      </section>

      <!-- FALD√ìN DELEGADOS -->
      <section class="delegados-section">
        <div class="delegados-header">
          <h3>Delegados</h3>
          <span>Cada delegado con su color ¬∑ Clic para desplegar sus centros</span>
        </div>
        <div class="delegados-grid" id="delegadosGrid"></div>
      </section>
    </div>

    <!-- Otros m√≥dulos (contenido placeholder, para que el men√∫ cambie de m√≥dulo) -->
    <div id="section-centros" class="section">
      <div class="section-placeholder">
        M√≥dulo <strong>Centros</strong> ¬∑ Aqu√≠ podremos listar y filtrar centros en detalle.
      </div>
    </div>

    <div id="section-visitas" class="section">
      <div class="section-placeholder">
        M√≥dulo <strong>Visitas</strong> ¬∑ Agenda, planificaci√≥n y seguimiento de visitas.
      </div>
    </div>

    <div id="section-servicios" class="section">
      <div class="section-placeholder">
        M√≥dulo <strong>Servicios</strong> ¬∑ Detalle de servicios realizados, AAR, ajustes, etc.
      </div>
    </div>

    <div id="section-ventas" class="section">
      <div class="section-placeholder">
        M√≥dulo <strong>Ventas</strong> ¬∑ Funnel, conversi√≥n, ticket medio, devoluciones.
      </div>
    </div>

    <div id="section-proyectos" class="section">
      <div class="section-placeholder">
        M√≥dulo <strong>Proyectos</strong> ¬∑ Proyectos especiales, campa√±as y foco trimestral.
      </div>
    </div>
  </main>

  <!-- ============================
       SCRIPT
  =============================== -->
  <script>
    // ----- Toggle modo oscuro / claro -----
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    themeToggle.addEventListener('click', () => {
      body.classList.toggle('light');
    });

    // ----- Cambio de m√≥dulo por sidebar -----
    const navList = document.getElementById('navList');
    const sections = document.querySelectorAll('.section');

    navList.addEventListener('click', (e) => {
      const item = e.target.closest('.nav-item');
      if (!item) return;
      const sectionName = item.getAttribute('data-section');
      document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
      item.classList.add('active');

      sections.forEach(sec => sec.classList.remove('active'));
      const activeSection = document.getElementById('section-' + sectionName);
      if (activeSection) activeSection.classList.add('active');
    });

    // ----- COLORES DELEGADOS -----
    const delegadosColores = {
      "Eneritz Aranguren": "#2ECC71",
      "Laura Plazas": "#3498DB",
      "Daniel Chazo": "#9B59B6",
      "Manuel C√°novas": "#E67E22",
      "Cecilia P√©rez": "#1ABC9C",
      "Martin Sebasti√°n": "#E74C3C",
      "Marisa Carmona": "#F1C40F",
      "Laura Ramos": "#2E86C1",
      "Blanca Fdez. de la Pradilla": "#A569BD",
      "Maribel Amezcua": "#D35400",
      "Sonia Godino": "#7DCEA0",
      "Ver√≥nica Alfons√≠n": "#5DADE2",
      "Sergio Per√°n": "#CD6155"
    };

    // ----- Centros por delegado (muestras representativas; se pueden extender f√°cilmente) -----
    const centrosPorDelegado = {
      "Eneritz Aranguren": [
        "AVENIDA DIAGONAL - BARCELONA",
        "BARCELONA CC DIAGONAL MAR",
        "LLEIDA",
        "Lleida CC Carrefour",
        "C.C. TARRAGONA Comte de Rius,9",
        "TERRASSA",
        "SANT ADRI√Ä DE BES√íS ALCAMPO CC",
        "ZARAGOZA (varios centros)"
      ],
      "Laura Plazas": [
        "CERDANYOLA - BARCELONA",
        "BARCELONA CC DIAGONAL MAR",
        "BARCELONA SANTS",
        "CARDedeu - BARCELONA",
        "CORNELL√Å Rambla Josep Anselm Clav√©",
        "GRAN DE SANT ANDREU 135",
        "CAMBRILS Carrer de les Barques",
        "VIC - BARCELONA"
      ],
      "Daniel Chazo": [
        "AAA NAR√ìN - GALICIA",
        "FERROL ALCAMPO CC - A CORU√ëA",
        "PONTEVELLA - OURENSE",
        "LA CORU√ëA Calle Juan Fl√≥rez",
        "LUGO (dos centros)",
        "VIVIERO Avda. Cantarrana - LUGO"
      ],
      "Manuel C√°novas": [
        "AGUILAS - MURCIA",
        "ALHAMA-MURCIA",
        "ALICANTE Calle General Lacy",
        "EL PALMAR - MURCIA",
        "C.C. NUEVA CONDOMINA - MURCIA",
        "CC ATALAYAS - MURCIA",
        "CALPE - ALICANTE",
        "ORIHUELA - ALICANTE",
        "FINESTRAT CC LA MARINA - ALICANTE"
      ],
      "Cecilia P√©rez": [
        "ALAIN AFFLELOU CARLET - VALENCIA",
        "ALZIRA Plaza del Reino - VALENCIA",
        "BURJASSOT Carretera de Ll√≠ria - VALENCIA",
        "VALENCIA LLIRIA",
        "VALENCIA MALILLA C/Olt√°",
        "VALENCIA CC NUEVO CENTRO",
        "VALENCIA MARQUES DE SOTELO",
        "PATERNA - VALENCIA",
        "MISLATA - VALENCIA",
        "PUERTO DE SAGUNTO - VALENCIA",
        "VINAROS - CASTELLON"
      ],
      "Martin Sebasti√°n": [
        "ALAMEDA MALAGA - M√ÅLAGA",
        "ALGECIRAS - C√ÅDIZ",
        "ALMERIA Calle Navarro Rodrigo",
        "ALMERIA CARREFOUR",
        "ESTEPONA - M√ÅLAGA",
        "C√ìRDOBA CARREFOUR CC",
        "C√ìRDOBA JESUS RESCATADO",
        "M√ÅLAGA Hilera",
        "M√ÅLAGA Calle Beethoven",
        "PUERTO DE SANTA MARIA CARREFOUR CC"
      ],
      "Marisa Carmona": [
        "ALBACETE CC ALBACENTER",
        "ALBACETE CC LOS LLANOS",
        "BOADILLA Av. Infante Don Luis",
        "C.C. ISLAZUL - MADRID",
        "C.C. LA GAVIA - MADRID",
        "C.C. MADRID RIO 2",
        "CASTELLON CARREFOUR",
        "CASTELLON Calle Enmedio",
        "TRS TOLEDO Talavera CC Los Alfares",
        "SALAMANCA Reconquista"
      ],
      "Laura Ramos": [
        "ALCOBENDAS CONSTITUCI√ìN - MADRID",
        "C.C. CARREFOUR ALCOBENDAS",
        "C.C. CARREFOUR LAS ROSAS",
        "C.C. GETAFE 3 - MADRID",
        "MADRID FRANCOS RODR√çGUEZ",
        "MADRID LOPEZ DE HOYOS",
        "MADRID CC XANAD√ö",
        "LEGANES CARREFOUR CC",
        "VALDEMORO - MADRID",
        "VILLAVERDE - MADRID"
      ],
      "Blanca Fdez. de la Pradilla": [
        "ARAVACA - MADRID",
        "C.C. GRAN PLAZA 2 - MADRID",
        "ALCAL√Å DE HENARES CC",
        "MADRID ACACIAS",
        "MADRID Calle Ayacucho",
        "MADRID Paseo Delicias",
        "MADRID Principe de Vergara",
        "Tres Cantos - MADRID",
        "TORREJ√ìN CC Parque Corredor"
      ],
      "Maribel Amezcua": [
        "CACERES - C√ÅCERES",
        "GANDIA - VALENCIA",
        "CC NEVADA SHOPPING - GRANADA",
        "M√ÅLAGA CC LA ROSALEDA",
        "M√ÅLAGA Plaza F√©lix S√°enz",
        "CAMAS CARREFOUR - SEVILLA",
        "SEVILLA CALLE ASUNCION",
        "SEVILLA CARREFOUR MACARENA",
        "SEVILLA MONTEQUINTO CARREFOUR CC",
        "SEVILLA San Pablo"
      ],
      "Sonia Godino": [
        "BARAKALDO - VIZCAYA",
        "BILBAO CORREO - VIZCAYA",
        "BILBONDO - VIZCAYA",
        "GETXO - VIZCAYA",
        "DONOSTI GROS - SAN SEBASTI√ÅN",
        "PAMPLONA (varios: C. Exclusivo, Sancho el Mayor, Carlos III)",
        "LAIN CALVO - BURGOS",
        "VALLADOLID Paseo Zorrilla"
      ],
      "Ver√≥nica Alfons√≠n": [
        "BOUZAS - PONTEVEDRA",
        "CASTELAO - PONTEVEDRA",
        "C.C. CARREFOUR PONTEVEDRA",
        "GIJ√ìN - ASTURIAS",
        "OVIEDO Av. Galicia",
        "MAR√çN - PONTEVEDRA",
        "MELIDE Ronda da Coru√±a - A CORU√ëA",
        "VILAGARCIA DE AROUSA - PONTEVEDRA"
      ],
      "Sergio Per√°n": [
        "C.C. MADRID SUR",
        "C/BURGOS - SANTANDER",
        "SCB Santander CC",
        "CC PLAZA DE LA ESTACI√ìN - MADRID",
        "MADRID CC La Vaguada",
        "MADRID NARV√ÅEZ",
        "MADRID ORTEGA Y GASSET",
        "SALAMANCA C/Toro",
        "SALAMANCA CARREFOUR CC",
        "TORRELAVEGA CARREFOUR CC",
        "TAF Talavera CC Los Alfares"
      ]
    };

    // ----- Pintar tarjetas de delegados -----
    const delegadosGrid = document.getElementById('delegadosGrid');

    Object.keys(centrosPorDelegado).forEach(nombre => {
      const card = document.createElement('div');
      card.className = 'delegado-card';

      const header = document.createElement('div');
      header.className = 'delegado-header';
      header.style.background = delegadosColores[nombre] || '#4b5563';

      const body = document.createElement('div');
      body.className = 'delegado-body';

      const nameEl = document.createElement('div');
      nameEl.className = 'delegado-name';
      nameEl.textContent = nombre;

      const metaEl = document.createElement('div');
      metaEl.className = 'delegado-meta';
      metaEl.textContent = `Centros: ${centrosPorDelegado[nombre].length}`;

      const toggleEl = document.createElement('div');
      toggleEl.className = 'toggle-text';
      toggleEl.textContent = 'Ver centros ‚ñº';

      body.appendChild(nameEl);
      body.appendChild(metaEl);
      body.appendChild(toggleEl);

      const list = document.createElement('div');
      list.className = 'centros-list';

      centrosPorDelegado[nombre].forEach(c => {
        const item = document.createElement('div');
        item.className = 'centro-item';
        item.textContent = c;
        list.appendChild(item);
      });

      card.appendChild(header);
      card.appendChild(body);
      card.appendChild(list);

      card.addEventListener('click', () => {
        const visible = list.style.display === 'block';
        list.style.display = visible ? 'none' : 'block';
        toggleEl.textContent = visible ? 'Ver centros ‚ñº' : 'Ocultar centros ‚ñ≤';
      });

      delegadosGrid.appendChild(card);
    });

    // ----- GR√ÅFICAS -----
    const ctxEvo = document.getElementById('chartEvolucion').getContext('2d');
    new Chart(ctxEvo, {
      type: 'line',
      data: {
        labels: ['Ene','Feb','Mar','Abr','May','Jun','Jul','Ago','Sep','Oct','Nov','Dic'],
        datasets: [
          {
            label: 'Visitas realizadas',
            data: [120,138,156,172,149,181,196,205,212,231,224,238],
            borderWidth: 2,
            tension: 0.35,
            borderColor: '#4ade80'
          },
          {
            label: '% Aplicaciones a prueba',
            data: [32,34,35,37,39,40,41,43,44,43,42,44],
            borderWidth: 2,
            borderDash: [4,4],
            tension: 0.35,
            borderColor: '#38bdf8'
          },
          {
            label: '% Conversi√≥n venta',
            data: [21,22,23,24,25,26,27,28,29,27,26,27],
            borderWidth: 2,
            tension: 0.35,
            borderColor: '#f97316'
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            labels: {
              color: '#9ca3af',
              font: { size: 10 }
            }
          }
        },
        scales: {
          x: {
            ticks: { color: '#9ca3af', font: { size: 9 } },
            grid: { color: 'rgba(31,41,55,0.4)' }
          },
          y: {
            ticks: { color: '#9ca3af', font: { size: 9 } },
            grid: { color: 'rgba(31,41,55,0.4)' }
          }
        }
      }
    });

    const ctxVis = document.getElementById('chartVisitas').getContext('2d');
    new Chart(ctxVis, {
      type: 'doughnut',
      data: {
        labels: ['Realizadas', 'Pendientes', 'Anuladas'],
        datasets: [{
          data: [72, 19, 9],
          borderWidth: 0,
          backgroundColor: ['#22c55e','#38bdf8','#f97316']
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom',
            labels: {
              color: '#e5e7eb',
              font: { size: 10 }
            }
          }
        },
        cutout: '60%'
      }
    });

    const ctxRadar = document.getElementById('chartRadar').getContext('2d');
    new Chart(ctxRadar, {
      type: 'radar',
      data: {
        labels: ['Visitas','Servicios','Ventas','HIT','AAR','Ayudas'],
        datasets: [
          {
            label: 'Blanca',
            data: [80, 70, 28, 84, 60, 40],
            borderColor: '#A569BD',
            backgroundColor: '#A569BD33',
            borderWidth: 2
          },
          {
            label: 'Cecilia',
            data: [75, 65, 32, 82, 58, 45],
            borderColor: '#1ABC9C',
            backgroundColor: '#1ABC9C33',
            borderWidth: 2
          },
          {
            label: 'Eneritz',
            data: [78, 68, 29, 80, 62, 38],
            borderColor: '#2ECC71',
            backgroundColor: '#2ECC7133',
            borderWidth: 2
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom',
            labels: {
              color: '#e5e7eb',
              font: { size: 9 }
            }
          }
        },
        scales: {
          r: {
            angleLines: { color: 'rgba(31,41,55,0.5)' },
            grid: { color: 'rgba(31,41,55,0.5)' },
            pointLabels: { color: '#e5e7eb', font: { size: 9 } },
            ticks: { display: false, beginAtZero: true }
          }
        }
      }
    });
  </script>
</body>
</html>
